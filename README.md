# Quote Tickers Server/Client

Учебная интерактивная система сервер-клиент трансляции данных о котировке
тикеров.

Создано в рамках курса "Rust для действующих разработчиков" (Яндекс Практикум),
2026 год.

## Структура проекта

Рабочее пространство (`workspace`) объединяет 4 ящика: 2 запускаемых приложения
и две библиотеки:

- `quote_server` (компилируемое имя `qserver`) — консольный TCP/UDP-сервер,
  который умеет безостановочно генерировать котировки тикеров и транслирует их
  через протокол UDP подписавшемуся клиенту
- `quote_client` (компилируемое имя `qclient`) — консольный TCP/UDP-клиент,
  получающий данные от сервера котировок
- `commons` — библиотека общих и вспомогательных методов для основных
  приложений
- `macros` — универсальные макросы, в первую очередь derive

## Установка

Требуется установленный Rust Toolchain (Rust и Cargo, версия 1.90+).
[Инструкция](https://rust-lang.org/tools/install/).

Так как все компоненты приложения объединены в рабочее пространство, возможны
одновременная компиляция, и сборка по-отдельности каждого ящика. Рекомендуется
первый вариант.

```shell
git clone git@github.com:Shindler7/rust2sprint.git
cd rust2sprint
cargo build --release
```

Запускаемые файлы и библиотеки будут размещены в директориии `target\release\`.

## Быстрый старт

### Запуск сервера

- Создайте файл `tickers.txt` и поместите его в директорию `data` в корне
  проекта (эти параметры можно изменить в настройках приложения, в файле
  `config.rs`). Примерное содержимое файла (названия тикеров):

```text
AAPL
MSFT
GOOGL
AMZN
NVDA
META
TSLA
JPM
JNJ
V
...
```

- Запустите сервер:

```shell
./qserver -p 8080
```

Ключ `-p` (`--port`) необязательный. По умолчанию используется значение `8888`.

Пока сервер работает, он будет постоянно генерировать поток тикеров, независимо
от количества подключенных клиентов.

**Важно!** При обращении через клиента нужно учитывать, что после рукопожатия
сервер отправляет информационные сообщения (например, об имеющихся командах).
Завершается этот блок терминатором `READY` после которого сервер переходит
в режим слушателя. Примерно так:

```shell
Успешное подключение к Quote Server!

READY
```

### Запуск клиента

- Создайте файл, например, `subscribes.txt` в любой доступной для чтения
  директории. В нём должны содержаться названия тикеров, обновления которых
  будут отслеживаться _(если файла нет, то отслеживаются все тикеры)_.
- Запустите клиент:

```shell
./qclient --udp 34254 stream -f ~/source/repos/subsribes.txt
```

- Можно подписаться на все тикеры, известные генератору. Запустить так:

```shell
./qclient --udp 34254 stream
```

При запуске клиента можно также передать свой адрес сокета сервера
(по умолчанию `127.0.0.1`) и порт (по умолчанию `8888`). Чтобы посмотреть
доступные команды можно вызвать `--help`:

```shell
./qclient --help
```

Подробнее о нужной команде, например, `stream`:

```shell
./qclient stream -h
```

## Документация

Все методы документированы в пределах разумной достаточности. Это можно
использовать для формирования документации стандартными методами `cargo doc`.

Например, так (из корня проекта или в каталоге отдельных крейтов):

```shell
cargo doc --open --message-format human --color auto --no-deps
```

## Тесты

Основной функционал приложения покрыт тестами.

```shell
cargo test
```

Можно запускать с флагами для подробностей:

```shell
cargo test -- --nocapture
```

## История версий

### Версии компонентов workspace

| Компонент    | Версия | Описание                                |
|--------------|--------|-----------------------------------------|
| quote_server | 0.1.0  | Сервер тикеров                          |
| quote_client | 0.1.0  | Клиент получения тикеров                |
| macros       | 0.1.0  | Библиотека макросов                     | 
| commons      | 0.1.0  | Поддерживающая библиотека общих методов |

## Благодарности

Команде "Яндекс Практикум".
